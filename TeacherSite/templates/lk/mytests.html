<!DOCTYPE html>
{% extends 'lk/lk_base.html' %}
{% load static %}

{% block title %} Мои результаты {% endblock %}

{% block header-content %} Мои результаты{% endblock %}
{% block article-content %}
<script>
$('document').ready(function() {

    var array = $(".res");
        for(var i=0;i<array.length;i++){
            var result=array.eq(i).text();
            var result2=result.replace(',','.');

            if (result2<30) {
              array.eq(i).css('background-color','red');
            }
            if (result2>75) {
              array.eq(i).css('background-color','rgb(87, 250, 72)');
            }
            if (result2>=30&&result2<50) {
              array.eq(i).css('background-color','rgb(146, 187, 247)');
            }
            if (result2>=50&&result2<70) {
              array.eq(i).css('background-color','yellow');
            }
        }

  /*
    if (result<30) {
      $('.res').css('background-color','red');
    };*/

});


</script>



{% if results %}
<table style="width:50%;">
  <tr class="table_header">
     <th >Название теста</th><th >Попытка</th><th >Предмет</th><th >Результат</th><th >Дата прохождения</th>
    </tr>

   {% for r in results %}
    <tr height="50px">
        <td  class="res1" style="width:45%;"> {{r.test}}</td>
        <td style="width:10%;"> {{r.attempt_number}}</td>
        <td style="width:10%;">{{r.test_category}}</td>
        <td class="res" style="width:15%;">{{r.result_percentage}}</td>
        <td style="width:20%;">{{r.test_data}}</td>
     </tr>
   {% endfor %}

</table>
{% else %}
<p>Пока нет пройденных тестов</p>
{% endif %}

 {% endblock %}
